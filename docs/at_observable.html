<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>@Observable · Arez</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="@Observable · Arez"/><meta property="og:type" content="website"/><meta property="og:url" content="https://arez.github.io/index.html"/><meta property="og:description" content="The {@api_url: annotations.Observable} annotation simplifies writing [observable](/docs/observable_values.html) properties."/><link rel="shortcut icon" href="/img/favicon-32x32.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css"/><link rel="alternate" type="application/atom+xml" href="https://arez.github.io/blog/atom.xml" title="Arez Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://arez.github.io/blog/feed.xml" title="Arez Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg"/><h2 class="headerTitle">Arez</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/docs/overview.html" target="_self">Docs</a></li><li><a href="/api" target="_self">API</a></li><li><a href="/blog" target="_self">Blog</a></li><li><a href="https://github.com/arez/arez/releases" target="_blank">Releases</a></li><li><a href="https://github.com/arez/arez" target="_blank">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Components</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>About</h3><ul><li class="navListItem"><a class="navItem" href="/docs/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/motivation.html">Motivation</a></li><li class="navListItem"><a class="navItem" href="/docs/project_setup.html">Project Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/getting_started.html">Getting Started</a></li></ul></div><div class="navGroup navGroupActive"><h3>Concepts</h3><ul><li class="navListItem"><a class="navItem" href="/docs/concepts.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/transactions.html">Transactions</a></li><li class="navListItem"><a class="navItem" href="/docs/observable_values.html">Observable Values</a></li><li class="navListItem"><a class="navItem" href="/docs/computed_values.html">Computed Values</a></li><li class="navListItem"><a class="navItem" href="/docs/observers.html">Observers</a></li><li class="navListItem"><a class="navItem" href="/docs/actions.html">Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/scheduler.html">Scheduler</a></li><li class="navListItem"><a class="navItem" href="/docs/native_components.html">Native Components</a></li><li class="navListItem"><a class="navItem" href="/docs/zones.html">Zones</a></li></ul></div><div class="navGroup navGroupActive"><h3>Components</h3><ul><li class="navListItem"><a class="navItem" href="/docs/components.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/component_example.html">Example</a></li><li class="navListItem"><a class="navItem" href="/docs/at_arez_component.html">@ArezComponent</a></li><li class="navListItem"><a class="navItem" href="/docs/at_component_id.html">@ComponentId</a></li><li class="navListItem"><a class="navItem" href="/docs/lifecycle_callbacks.html">Lifecycle Callbacks</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/at_observable.html">@Observable</a></li><li class="navListItem"><a class="navItem" href="/docs/at_computed.html">@Computed</a></li><li class="navListItem"><a class="navItem" href="/docs/at_memoize.html">@Memoize</a></li><li class="navListItem"><a class="navItem" href="/docs/at_action.html">@Action</a></li><li class="navListItem"><a class="navItem" href="/docs/at_observed.html">@Observed</a></li><li class="navListItem"><a class="navItem" href="/docs/at_component_dependency.html">@ComponentDependency</a></li><li class="navListItem"><a class="navItem" href="/docs/at_cascade_dispose.html">@CascadeDispose</a></li><li class="navListItem"><a class="navItem" href="/docs/repositories.html">Repositories</a></li><li class="navListItem"><a class="navItem" href="/docs/generated_classes.html">Generated Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/accessing_primitives.html">Accessing primitives</a></li><li class="navListItem"><a class="navItem" href="/docs/dependency_injection.html">Dependency Injection</a></li></ul></div><div class="navGroup navGroupActive"><h3>Project Documentation</h3><ul><li class="navListItem"><a class="navItem" href="/docs/faq.html">Frequently Asked Questions</a></li><li class="navListItem"><a class="navItem" href="/docs/related_projects.html">Related projects</a></li><li class="navListItem"><a class="navItem" href="/docs/development_process.html">Development Process</a></li><li class="navListItem"><a class="navItem" href="/docs/intellij.html">IntelliJ IDEA IDE Setup</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/arez/arez/tree/master/docs/at_observable.md" target="_blank">Edit</a><h1>@Observable</h1></header><article><div><span><p>The <a href="/api/arez/annotations/Observable.html"><code>@Observable</code></a> annotation simplifies writing <a href="/docs/observable_values.html">observable</a> properties.
The simplest use-case involves annotating one of a standard getter/setter pair with the annotation.</p>
<p>For example:</p>
<p><pre><code class="hljs"><span class="hljs-meta">@ArezComponent</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span>
</span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> _value;

  <span class="hljs-meta">@Observable</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getValue</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">return</span> _value;
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setValue</span><span class="hljs-params">( <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> value )</span>
  </span>{
    _value = value;
  }
}</code></pre></p>
<p>The component can also be defined using a pair of abstract getters and setters, in which case the annotation
processor will provide a suitable implementation of the getter. This often results in shorter, simpler code.
For example:</p>
<p><pre><code class="hljs"><span class="hljs-meta">@ArezComponent</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyModel</span>
</span>{
  <span class="hljs-meta">@Observable</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getValue</span><span class="hljs-params">()</span></span>;

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setValue</span><span class="hljs-params">( <span class="hljs-keyword">int</span> value )</span></span>;
}</code></pre></p>
<p>There are additional constraints that are apply when defining observable. i.e. The type of the getter and setter
must match. These constraints are detailed in the <a href="/api/arez/annotations/Observable.html"><code>@Observable</code></a> API documentation.</p>
<h2><a class="anchor" aria-hidden="true" name="customizing-names"></a><a href="#customizing-names" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customizing names</h2>
<p>The <code>@Observable</code> annotation methods can be named using non-standard naming conventions and this is sometimes
required to integrate with existing frameworks. In this scenario, the user must add and additional parameter
to the annotation to explicitly name the observable property. This may require annotating both the setter and
the setter with the <code>@Observable</code> annotation.</p>
<p>For example:</p>
<p><pre><code class="hljs"><span class="hljs-meta">@ArezComponent</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Currency</span>
</span>{
  <span class="hljs-keyword">private</span> BigDecimal _amount;

  <span class="hljs-meta">@Observable</span>( name = <span class="hljs-string">"amount"</span> )
  <span class="hljs-function"><span class="hljs-keyword">public</span> BigDecimal <span class="hljs-title">amount</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">return</span> _amount;
  }

  <span class="hljs-meta">@Observable</span>( name = <span class="hljs-string">"amount"</span> )
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">updateAmount</span><span class="hljs-params">( <span class="hljs-keyword">final</span> BigDecimal amount )</span>
  </span>{
    _amount = Objects.requireNonNull( amount );
  }

  ...
}</code></pre></p>
<h2><a class="anchor" aria-hidden="true" name="custom-change-propagation"></a><a href="#custom-change-propagation" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom change propagation</h2>
<p>Sometimes you want to integrate Arez into systems that have existing change propagation mechanisms. For
example, Arez was integrated in a java variant of React called <a href="https://react4j.github.io">React4j</a>. React4j
components are configured by passing the component <code>props</code>. These components can be re-configured by passing
the component another value for <code>props</code>. The react framework is wholly responsible for detecting changes in
<code>props</code>, assigning the <code>props</code> field and then invoking a callback method on the component to notify the
component that <code>props</code> has changed. Making this <code>props</code> property observable within Arez involved the following
changes.</p>
<ul>
<li>Disabling the <code>@Observable</code> setter via the <a href="/api/arez/annotations/Observable.html#expectSetter--"><code>ObservableValue.expectSetter()</code></a>
parameter on the getter.</li>
<li>Accessing the underlying <a href="/api/arez/ObservableValue.html"><code>ObservableValue</code></a> primitive using the <a href="/api/arez/annotations/ObservableValueRef.html"><code>@ObservableValueRef</code></a> annotation.
See <a href="/docs/accessing_primitives.html">accessing primitives</a> documentation on details on how this is achieved.</li>
<li>Manually invoking <a href="/api/arez/ObservableValue.html#reportChanged--"><code>ObservableValue.reportChanged()</code></a> in the callback.</li>
</ul>
<p>For example:</p>
<p><pre><code class="hljs"><span class="hljs-meta">@ArezComponent</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ReactComponent</span>
</span>{
  <span class="hljs-meta">@Observable</span>( expectSetter = <span class="hljs-keyword">false</span> )
  <span class="hljs-function"><span class="hljs-keyword">protected</span> Props <span class="hljs-title">props</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-comment">//Return the native props object here.</span>
    ...
  }

  <span class="hljs-comment">//This will be overridden and implemented in the Arez subclass</span>
  <span class="hljs-meta">@ObservableValueRef</span>
  <span class="hljs-function"><span class="hljs-keyword">abstract</span> ObservableValue&lt;Props&gt; <span class="hljs-title">getPropsObservableValue</span><span class="hljs-params">()</span></span>;

  <span class="hljs-comment">// This method is wrapped in an Action to ensure change is propagated</span>
  <span class="hljs-comment">// correctly in arez system.</span>
  <span class="hljs-meta">@Action</span>
  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">reportPropsChanged</span><span class="hljs-params">()</span>
  </span>{
    getPropsObservableValue().reportChanged();
  }

  <span class="hljs-comment">// This method is invoked by the React runtime</span>
  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">componentWillReceiveProps</span><span class="hljs-params">( @Nonnull <span class="hljs-keyword">final</span> Props nextProps )</span>
  </span>{
    reportPropsChanged();
    ...
  }

  ...
}</code></pre></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="lifecycle_callbacks.html">← Lifecycle Callbacks</a><a class="docs-next button" href="at_computed.html">@Computed →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.svg" alt="Arez" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/overview.html">Overview</a><a href="/docs/concepts.html">Concepts</a><a href="/api/index.html">API Reference</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" href="https://github.com/arez/arez" data-icon="octicon-star" data-count-href="/arez/arez/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2018 the Arez Project.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                apiKey: 'b8c49751e0914443436822868f0c5000',
                indexName: 'arez',
                inputSelector: '#search_input_react'
              });
            </script></body></html>