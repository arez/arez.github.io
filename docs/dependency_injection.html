<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>Dependency Injection · Arez</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Dependency Injection · Arez"/><meta property="og:type" content="website"/><meta property="og:url" content="https://arez.github.io/index.html"/><meta property="og:description" content="Arez components provide several mechanisms for integrating into dependency injection frameworks. The dependency"/><link rel="shortcut icon" href="/img/favicon-32x32.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg"/><h2 class="headerTitle">Arez</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/docs/overview.html" target="_self">Docs</a></li><li><a href="/api" target="_self">API</a></li><li><a href="https://github.com/arez/arez/releases" target="_blank">Releases</a></li><li><a href="https://github.com/arez/arez" target="_blank">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Components</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>About</h3><ul><li class="navListItem"><a class="navItem" href="/docs/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/motivation.html">Motivation</a></li><li class="navListItem"><a class="navItem" href="/docs/project_setup.html">Project Setup</a></li><li class="navListItem"><a class="navItem" href="/docs/getting_started.html">Getting Started</a></li></ul></div><div class="navGroup navGroupActive"><h3>Concepts</h3><ul><li class="navListItem"><a class="navItem" href="/docs/concepts.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/transactions.html">Transactions</a></li><li class="navListItem"><a class="navItem" href="/docs/observable_values.html">Observable Values</a></li><li class="navListItem"><a class="navItem" href="/docs/computable_values.html">Computable values</a></li><li class="navListItem"><a class="navItem" href="/docs/observers.html">Observers</a></li><li class="navListItem"><a class="navItem" href="/docs/actions.html">Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/scheduler.html">Scheduler</a></li><li class="navListItem"><a class="navItem" href="/docs/native_components.html">Native Components</a></li><li class="navListItem"><a class="navItem" href="/docs/zones.html">Zones</a></li></ul></div><div class="navGroup navGroupActive"><h3>Components</h3><ul><li class="navListItem"><a class="navItem" href="/docs/components.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/component_example.html">Example</a></li><li class="navListItem"><a class="navItem" href="/docs/at_arez_component.html">@ArezComponent</a></li><li class="navListItem"><a class="navItem" href="/docs/at_component_id.html">@ComponentId</a></li><li class="navListItem"><a class="navItem" href="/docs/lifecycle_callbacks.html">Lifecycle Callbacks</a></li><li class="navListItem"><a class="navItem" href="/docs/at_observable.html">@Observable</a></li><li class="navListItem"><a class="navItem" href="/docs/at_memoize.html">@Memoize</a></li><li class="navListItem"><a class="navItem" href="/docs/at_action.html">@Action</a></li><li class="navListItem"><a class="navItem" href="/docs/at_observe.html">@Observe</a></li><li class="navListItem"><a class="navItem" href="/docs/at_component_dependency.html">@ComponentDependency</a></li><li class="navListItem"><a class="navItem" href="/docs/at_cascade_dispose.html">@CascadeDispose</a></li><li class="navListItem"><a class="navItem" href="/docs/at_reference.html">@Reference</a></li><li class="navListItem"><a class="navItem" href="/docs/generated_classes.html">Generated Classes</a></li><li class="navListItem"><a class="navItem" href="/docs/accessing_primitives.html">Accessing primitives</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/dependency_injection.html">Dependency Injection</a></li></ul></div><div class="navGroup navGroupActive"><h3>Project Documentation</h3><ul><li class="navListItem"><a class="navItem" href="/docs/faq.html">Frequently Asked Questions</a></li><li class="navListItem"><a class="navItem" href="/docs/related_projects.html">Related projects</a></li><li class="navListItem"><a class="navItem" href="/docs/development_process.html">Development Process</a></li><li class="navListItem"><a class="navItem" href="/docs/intellij.html">IntelliJ IDEA IDE Setup</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/arez/arez/tree/master/docs/dependency_injection.md" target="_blank">Edit</a><h1>Dependency Injection</h1></header><article><div><span><p>Arez components provide several mechanisms for integrating into dependency injection frameworks. The dependency
injection frameworks that have seen the most usage are:</p>
<ul>
<li><a href="https://sting-ioc.github.io/">Sting</a></li>
<li><a href="https://dagger.dev/">Dagger2</a></li>
<li><a href="https://code.google.com/archive/p/google-gin/">Gin</a></li>
</ul>
<p><a href="https://sting-ioc.github.io/">Sting</a> is the recommended toolkit as it is the easiest to integrate with, and it
produces faster, smaller code. It also has several enhancements aimed at improving the developer-experience. See
the <a href="https://sting-ioc.github.io/docs/dagger.html">dagger comparison</a> for some reasons why it is considered a better
fit in the context of web applications.</p>
<p>Arez components require dependencies to be passed in as constructor parameters. (Historically Arez supported
field and method injection but this frequently produced inefficient code and confused component authors as different
frameworks would inject components in different orders depending on whether they were declared in superclasses or in
the arez component and whether they used field or method injection).</p>
<p>Arez components consist of the authored component (i.e. <code>com.example.MyService</code>) and the generated component class
produced by the Arez annotation processor (i.e. <code>com.example.Arez_MyService</code>). When consuming an Arez component,
the consuming component should use the authored component (i.e. <code>com.example.MyService</code>) when consuming the component.</p>
<p>Every injection framework uses a slightly different mechanism to determine how to construct and wire together a graph
of objects. The following sections describe the two frameworks that have builtin support within Arez.</p>
<h2><a class="anchor" aria-hidden="true" name="sting"></a><a href="#sting" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sting</h2>
<p><a href="https://sting-ioc.github.io/">Sting</a> is a fast, easy to use, compile-time dependency injection toolkit. The toolkit
accepts a set of annotated java classes and generates source code to instantiate and wire together the components.
Sting was heavily inspired by <a href="https://dagger.dev/">Dagger2</a> but with a better developer-experience and
more efficient code generation. Sting models the application as a set of components that are contained within an
injector. An injector is responsible for constructing and linking components together.</p>
<p>The <a href="/api/arez/annotations/ArezComponent.html"><code>@ArezComponent</code></a> annotation has a
<a href="/api/arez/annotations/ArezComponent.html#sting--"><code>sting</code></a> parameter that controls whether the Arez annotation processor
adds sting annotations onto the generated component class. If the value of the
<a href="/api/arez/annotations/ArezComponent.html#sting--"><code>sting</code></a> parameter is
<a href="/api/arez/annotations/Feature.html#ENABLE"><code>ENABLE</code></a> or <a href="/api/arez/annotations/Feature.html#AUTODETECT"><code>AUTODETECT</code></a> and the
<code>sting.Injector</code> class is on the classpath then the annotations will be added.</p>
<p>The Arez component author can also add the <code>@Eager</code>, <code>@Typed</code> and <code>@Named</code> annotations from Sting onto the component
and these will be copied to the generated component class. The Arez component can be registered with the injector via
the <code>includes</code> parameter of the injector. (Although the next release of Sting will eliminate this requirement.)</p>
<p><pre><code class="hljs"><span class="hljs-meta">@Injector</span>( includes = MyService<span class="hljs-class">.<span class="hljs-keyword">class</span> )
<span class="hljs-title">public</span> <span class="hljs-title">interface</span> <span class="hljs-title">ExampleStingInjector</span>
</span>{
  <span class="hljs-function">ExampleConsumer <span class="hljs-title">getExampleConsumer</span><span class="hljs-params">()</span></span>;
}</code></pre></p>
<p>The injector can then be used in code like:</p>
<p><pre><code class="hljs"><span class="hljs-keyword">final</span> ExampleStingInjector component = <span class="hljs-keyword">new</span> Sting_ExampleStingInjector();
component.getExampleConsumer().performSomeAction( <span class="hljs-number">42</span> );</code></pre></p>
<h2><a class="anchor" aria-hidden="true" name="dagger2"></a><a href="#dagger2" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dagger2</h2>
<p><a href="https://dagger.dev/">Dagger2</a> is a another take on a dependency injection framework that uses annotation
processors and statically checks the object graph at compilation time. The root objects in the graph are accessed via
a component which is an interface annotated by the <code>@dagger.Component</code> annotation. The injection rules are customized
via <code>@dagger.Module</code> annotated classes.</p>
<p>The <a href="/api/arez/annotations/ArezComponent.html"><code>@ArezComponent</code></a> annotation has a
<a href="/api/arez/annotations/ArezComponent.html#dagger--"><code>dagger</code></a> parameter that controls whether the Arez annotation processor
generates a Dagger module. If the value of the <a href="/api/arez/annotations/ArezComponent.html#dagger--"><code>dagger</code></a> parameter is
<a href="/api/arez/annotations/Feature.html#ENABLE"><code>ENABLE</code></a> or <a href="/api/arez/annotations/Feature.html#AUTODETECT"><code>AUTODETECT</code></a> and the
<code>dagger.Component</code> class is on the classpath then a module will be generated that looks like:</p>
<p><pre><code class="hljs"><span class="hljs-meta">@Module</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MyServiceDaggerModule</span> </span>{
  <span class="hljs-meta">@Provides</span>
  <span class="hljs-meta">@Nonnull</span>
  <span class="hljs-meta">@Singleton</span>
  <span class="hljs-function"><span class="hljs-keyword">static</span> MyService <span class="hljs-title">create</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Arez_MyService();
  }
}</code></pre></p>
<p>These can be incorporated into a dagger component like:</p>
<p><pre><code class="hljs"><span class="hljs-meta">@Singleton</span>
<span class="hljs-meta">@Component</span>( modules = MyServiceDaggerModule<span class="hljs-class">.<span class="hljs-keyword">class</span> )
<span class="hljs-title">public</span> <span class="hljs-title">interface</span> <span class="hljs-title">ExampleDaggerComponent</span>
</span>{
  <span class="hljs-function">ExampleConsumer <span class="hljs-title">getExampleConsumer</span><span class="hljs-params">()</span></span>;
}</code></pre></p>
<p>The dagger component can then be used in code like:</p>
<p><pre><code class="hljs"><span class="hljs-keyword">final</span> ExampleDaggerComponent component = DaggerExampleDaggerComponent.create();
component.getExampleConsumer().performSomeAction( <span class="hljs-number">42</span> );</code></pre></p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="accessing_primitives.html">← Accessing primitives</a><a class="docs-next button" href="faq.html">Frequently Asked Questions →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.svg" alt="Arez" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/overview.html">Overview</a><a href="/docs/concepts.html">Concepts</a><a href="/api/index.html">API Reference</a></div><div><h5>More</h5><a href="https://github.com/">GitHub</a><a class="github-button" href="https://github.com/arez/arez" data-icon="octicon-star" data-count-href="/arez/arez/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2022 the Arez Project.</section></footer></div></body></html>