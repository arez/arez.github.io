<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>Blog · Arez</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Blog · Arez"/><meta property="og:type" content="website"/><meta property="og:url" content="https://arez.github.io/index.html"/><meta property="og:description" content="Fast, easy, reactive state"/><link rel="shortcut icon" href="/img/favicon-32x32.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/idea.min.css"/><link rel="alternate" type="application/atom+xml" href="https://arez.github.io/blog/atom.xml" title="Arez Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://arez.github.io/blog/feed.xml" title="Arez Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg"/><h2 class="headerTitle">Arez</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/docs/overview.html" target="_self">Docs</a></li><li><a href="/api" target="_self">API</a></li><li><a href="/blog" target="_self">Blog</a></li><li><a href="https://github.com/arez/arez/releases" target="_blank">Releases</a></li><li><a href="https://github.com/arez/arez" target="_blank">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Recent Posts</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Recent Posts</h3><ul><li class="navListItem"><a class="navItem" href="/blog/2020/01/16/version-0.166-release.html">Arez 0.166 released</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/10/version-0.165-release.html">Arez 0.165 released</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/06/version-0.164-release.html">Arez 0.164 released</a></li><li class="navListItem"><a class="navItem" href="/blog/2020/01/06/version-0.163-release.html">Arez 0.163 released</a></li><li class="navListItem"><a class="navItem" href="/blog/2019/12/29/version-0.162-release.html">Arez 0.162 released</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer documentContainer postContainer blogContainer"><div class="wrapper"><div class="posts"><div class="post"><header class="postHeader"><h1><a href="/blog/2018/11/21/version-0.116-release.html">Arez 0.116 released</a></h1><p class="post-meta">November 21, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/arez" target="_blank">Arez Project</a></p></div></header><article class="post-content"><div><span><p><a href="https://github.com/arez/arez/compare/v0.115...v0.116">Full Changelog</a></p>
<p>Changes in this release:</p>
<ul>
<li><strong>[processor]</strong> Eliminate dead code emitted when an abstract observable with no initializer
(i.e. <code>@Observable( initializer = Feature.DISABLE )</code>) is also annotated with the <code>@ComponentDependency</code>
annotation.</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/blog/2018/11/19/version-0.115-release.html">Arez 0.115 released</a></h1><p class="post-meta">November 19, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/arez" target="_blank">Arez Project</a></p></div></header><article class="post-content"><div><span><p><a href="https://github.com/arez/arez/compare/v0.114...v0.115">Full Changelog</a></p>
<p>Changes in this release:</p>
<ul>
<li><strong>[core]</strong> Fixed bug inside scheduler that occurred when runaway reactions were detected and purged.
The observers had been removed from the task queue but still had the flag set indicating that they were
scheduled. If a subsequent action triggered the observer to be re-scheduled, the runtime would skip the
step of queueing the observer as it believed the observer was still in the queue. Thus observers that had
been purged would never react again.</li>
<li><strong>[gwt-output-qa]</strong> Remove assertions from <code>ArezBuildAsserts</code> that reference classes that have been
removed. i.e. Assertions for non-existent classes such as <code>arez.Reaction</code> and <code>arez.TransactionMode</code>.</li>
<li><strong>[gwt-output-qa]</strong> Update assertions in <code>ArezBuildAsserts</code> that reference classes that have been
renamed. i.e. Assertions for classes such as <code>arez.ReactionEnvironment</code> that was renamed to
<code>arez.ReactionEnvironment</code>.</li>
<li><strong>[gwt-output-qa]</strong> Add assertions in <code>ArezBuildAsserts</code> to ensure names are omitted if names are
disabled.</li>
<li><strong>[gwt-output-qa]</strong> Add assertions in <code>ArezBuildAsserts</code> to verify the <code>_context</code> field in <code>Transaction</code>,
<code>SpyImpl</code>, <code>ScheduleLock</code>, <code>MemoizeCache</code> and <code>ReactionScheduler</code> classes is not present if zones disabled.</li>
<li><strong>[gwt-output-qa]</strong> Add assertions in <code>ArezBuildAsserts</code> to verify the <code>Locator</code> interface and supporting
infrastructure is omitted if references are disabled.</li>
<li><strong>[gwt-output-qa]</strong> Add assertions in <code>ArezBuildAsserts</code> to verify the <code>PropertyAccessor</code> interface and
supporting infrastructure is omitted if property introspectors are disabled.</li>
<li><strong>[core]</strong> Changed the api of the <code>ArezContext.scheduleDispose(...)</code> method to accept an optional name
that will identify the task used to schedule dispose action. The name will be derived if not specified and
names are required.</li>
<li><strong>[core]</strong> Completely refactor the scheduler to extract monolithic scheduler into smaller components,
including a separate <code>TaskQueue</code> and an <code>Executor</code>. This is based on experiments conducted as parted of the
<code>Streak</code> streaming events library. This also made it possible to merge the separate dispose action task queue
and the observer reaction queue into a single unified task queue. As a result deferred disposes are scheduled
at the same priority as <code>HIGHEST</code> priority reactions. This may result in some differences in task sequencing as
previous to this change deferred dispose task were treated as a higher priority queue than <code>HIGHEST</code>. However
if the application used the priorities as documented or only used the higher level component abstraction then
this change should have no practical impact on application behaviour.</li>
<li><strong>[core]</strong> Rename the compile time constant <code>arez.purge_reactions_when_runaway_detected</code> to
<code>arez.purge_tasks_when_runaway_detected</code> and rename all related infrastructure.</li>
<li><strong>[core]</strong> Fix a bug in <code>arez.Node</code> where an <code>apiInvariant</code> check was guarded by <code>Arez.shouldCheckInvariants()</code>
rather than the correct <code>Arez.shouldCheckApiInvariants()</code>.</li>
<li><strong>[processor]</strong> Make the synthetic ids generated by the annotation processor 1 based rather than 0 based.</li>
<li><strong>[processor]</strong> The initialization sequence in generated components has been modified such that common
reactive elements such as the <code>Observable</code> that exposes the components <code>disposed</code> state now occurs
earlier in the initialization sequence. This should have no impact on application code as no user supplied code
executes during component initialization. However, it does change the order in which spy events are emitted
which may impact custom introspection tools.</li>
<li><strong>[core]</strong> Extract out common code from the generated components into <code>ComponentKernel</code> to reduce the
amount of code generated per-component.</li>
<li><strong>[core]</strong> Change the annotation on <code>Disposable.dispose(...)</code> to allow a null parameter. The code already
correctly handled this scenario.</li>
<li><strong>[processor]</strong> Fix bug where the underlying <code>ComputableValue</code> used to implement the <code>disposeOnDeactivate</code>
parameter of the <code>@ArezComponent</code> was not being correctly disposed when the component was released.</li>
<li><strong>[processor]</strong> Change the way code is generated for <code>@Action</code> annotated methods that do not declare exceptions
by removing the wrapping try-catch infrastructure as it is not needed and added code bloat.</li>
<li><strong>[processor]</strong> Change the way code is generated for <code>@Observe(executor=APPLICATION)</code> annotated methods that do
not declare exceptions by removing the wrapping try-catch infrastructure as it is not needed and added code bloat.</li>
<li><strong>[core]</strong> Change the implementation of <code>Arez.arePropertyIntrospectorsEnabled()</code> so that it is false unless
<code>Arez.areSpiesEnabled()</code> is also true.</li>
<li><strong>[core]</strong> Create the <code>arez.component.internal</code> package to contain classes that are implementation aspects that
Arez users should not rely upon as they may change. Move the following classes into the package:
<ul>
<li><code>ComponentKernel</code></li>
<li><code>MemoizeCache</code></li>
<li><code>AbstractRepository</code></li>
<li><code>AbstractContainer</code></li>
</ul></li>
<li><strong>[core]</strong> Fix invariant failure when the <code>ComponentObservable.observe()</code> method is invoked on a
disposed component annotated with <code>@ArezComponent(disposeOnDeactivate=true)</code>.</li>
<li><strong>[core]</strong> A <code>ComputableValue</code> can be kept alive programmatically by invoking the
newly added <code>ComputableValue.keepAlive()</code> method which will create a lock keepin the value active. When
the method is invoked the computable value will be activated if not currently active. The lock will only
be released when the return value of the <code>keepAlive()</code> method is disposed. A <code>ComputableValue</code> can only
deactivate if there are no observers and no locks active.</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/blog/2018/11/07/version-0.114-release.html">Arez 0.114 released</a></h1><p class="post-meta">November 7, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/arez" target="_blank">Arez Project</a></p></div></header><article class="post-content"><div><span><p><a href="https://github.com/arez/arez/compare/v0.113...v0.114">Full Changelog</a></p>
<p>Changes in this release:</p>
<ul>
<li><strong>[processor]</strong> Simplify the code in the generated <code>equals()</code> method to reduce the code size.</li>
<li><strong>[core]</strong> Make the method <code>MemoizeCache.getComputableValue(...)</code> public so that applications can get
access to the underlying <code>ComputableValue</code> instance when using class.</li>
<li><strong>[core]</strong> Update the <code>@ComputeableValueRef</code> annotation handling so that it can be paired with
<code>@Memoize</code> annotated methods with parameters as long as the <code>@ComputeableValueRef</code> annotated method
has exactly the same parameters.</li>
<li><strong>[processor]</strong> Allow <code>@Memoize</code> methods with parameters to have a <code>depType</code> parameter set to
<code>DepType.AREZ_OR_EXTERNAL</code> as it is now possible to access the associated <code>ComputableValue</code> and thus can
invoke the <code>reportPossiblyChanged()</code> method on the underlying <code>ComputableValue</code> and thus schedule the
computation externally.</li>
<li><strong>[core]</strong> Update the javadocs so that it is clear that the <code>@OnActivate</code>, <code>@OnDeactivate</code> and <code>@OnStale</code>
annotations can only be associated with an <code>@Memoize</code> annotated method with 0 parameters.</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/blog/2018/11/02/version-0.113-release.html">Arez 0.113 released</a></h1><p class="post-meta">November 2, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/arez" target="_blank">Arez Project</a></p></div></header><article class="post-content"><div><span><p><a href="https://github.com/arez/arez/compare/v0.112...v0.113">Full Changelog</a></p>
<p>Changes in this release:</p>
<ul>
<li><strong>[processor]</strong> Change the way the Dagger2 factory is defined by switching from a static method using a
<code>@Provide</code> annotation to using an abstract method using a <code>@Binds</code> annotation. This results in more optimized
code being output by the dagger compiler.</li>
<li>Upgrade the version of javapoet to <code>1.11.1</code>.</li>
<li>Upgrade the Dagger2 support to version <code>2.19</code>.</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/blog/2018/11/02/version-0.112-release.html">Arez 0.112 released</a></h1><p class="post-meta">November 2, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/arez" target="_blank">Arez Project</a></p></div></header><article class="post-content"><div><span><p><a href="https://github.com/arez/arez/compare/v0.111...v0.112">Full Changelog</a></p>
<p>Changes in this release:</p>
<ul>
<li><strong>[core]</strong> Add reference to external <code>arez-mediaquery</code> component.</li>
<li><strong>[core]</strong> In the spy events, convert the <code>duration</code> parameter into integers as no duration should
exceed the size of an integer.</li>
<li><strong>[core]</strong> In spy events, change the key used to identify the source of the event from source specific
string (i.e. <code>computed</code>, <code>observable</code>, <code>observer</code>, etc.) to use a generic key <code>name</code>.</li>
<li><strong>[core]</strong> Add flag <code>Flags.NO_REPORT_RESULT</code> that can be passed to <code>ArezContext.action(...)</code>,
<code>ArezContext.safeAction(...)</code> and <code>ArezContext.tracker(...)</code> methods that will result in the return value
(if any) from the action or observed function, not being specified in the <code>ActionCompletedEvent</code> spy event.</li>
<li><strong>[core]</strong> Add the <code>reportResult</code> parameter to the <code>@Action</code> annotation so that the underlying actions
can be passed the <code>Flags.NO_REPORT_RESULT</code> flag.</li>
<li><strong>[core]</strong> Add the <code>reportResult</code> parameter to the <code>@Observe</code> annotation so that the underlying observers
can be passed the <code>Flags.NO_REPORT_RESULT</code> flag.</li>
<li><strong>[core]</strong> Remove the <code>normalCompletion</code> parameter when serializing the <code>ActionCompleted</code> spy event
as it is completely derivable based on the presence of the <code>errorMessage</code> parameter.</li>
<li><strong>[core]</strong> Rename the spy event from <code>ReactionStartedEvent</code> to <code>ObserveStartedEvent</code>.</li>
<li><strong>[core]</strong> Rename the spy event from <code>ReactionCompletedEvent</code> to <code>ObserveCompletedEvent</code>.</li>
<li><strong>[core]</strong> Rename the spy event from <code>ReactionObserveScheduled</code> to <code>ObserveScheduledEvent</code>.</li>
<li><strong>[core]</strong> Enhance the <code>ComputeCompletedEvent</code> spy event to include the error message (if present) or
result computed.</li>
<li><strong>[core]</strong> Rename the class <code>arez.ComputedValue</code> to <code>arez.ComputableValue</code> with the intent of using a
consistent terminology and tense within the API surface. This also involved renaming several support classes
such as <code>arez.ComputedValueInfo</code> to <code>arez.ComputableValueInfo</code> and <code>arez.spy.ComputedValue*Event</code> to
<code>arez.spy.ComputableValue*Event</code>.</li>
<li><strong>[core]</strong> Rename the <code>arez.ArezContext.computed(...)</code> methods to <code>arez.ArezContext.computable(...)</code>.</li>
<li><strong>[core]</strong> Rename the annotation <code>@ComputedValueRef</code> to <code>@ComputableValueRef</code>.</li>
<li><strong>[core]</strong> Fix invalid invariant failure triggered when invoking an action when compile time setting
<code>arez.check_invariants</code> is set to <code>false</code> but <code>arez.check_api_invariants</code> is set to <code>true</code>.</li>
<li><strong>[core]</strong> Support the flag <code>Flags.NO_REPORT_RESULT</code> being passed to the <code>ArezContext.computable(...)</code> method
to stop the result of computable calculation being reported in the <code>ComputeCompletedEvent</code> spy event.</li>
<li><strong>[core]</strong> Add the <code>reportResult</code> parameter to the <code>@Computed</code> annotation so that the underlying <code>ComputedValue</code>
instances can be passed the <code>Flags.NO_REPORT_RESULT</code> flag.</li>
<li><strong>[core]</strong> If a <code>ComputedValue</code> was read from within an action and the element is not observed from an <code>Observer</code>
then the spy event <code>ComputableValueDeactivatedEvent</code> would be generated after the compute completed despite
there being no corresponding <code>ComputableValueActivatedEvent</code> spy event. This even is no longer generated.</li>
<li><strong>[core]</strong> Improve invariant failure messages when attempting to add or remove <code>OnDispose</code> listeners
to the <code>DisposeNotifier</code>. This is typically exhibited when using the annotation processor to process a class
that has a <code>@ComponentDependency</code> that is passed to the constructor and the dependency is already disposed.</li>
<li><strong>[core]</strong> Rename the annotation <code>@OnDepsChanged</code> to <code>@OnDepsChange</code> to keep consistent tense in
annotation naming convention.</li>
<li><strong>[core]</strong> Add the <code>throwable</code> parameter to the <code>ObserveCompletedEvent</code> spy event.</li>
<li><strong>[core]</strong> Rename all the spy events from past tense to present tense to avoid the implication that the event
has occurred as many of the spy events are emitted prior to the actual event occurring.</li>
<li><strong>[core]</strong> Rename the parameters to several methods in <code>ArezContext</code> from <code>observed</code> to <code>observe</code> to be more
consistent with the rest of the API.</li>
<li><strong>[core]</strong> Merge the <code>@Computed</code> annotation into the <code>@Memoize</code> annotation. The two annotations both made the
return value of a method observable in different contexts. Initially the annotations were separate as the mechanisms
for implementing the scenario where the method had no parameters and the scenario where the method had parameters
were significantly different. This change unifies the two scenarios in favour of improving the developer
experience.</li>
<li><strong>[core]</strong> Add some minimal documentation describing how to explicitly force a <code>@Memoize</code> annotated method
to re-evaluate when a non-arez dependency has been updated.</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/blog/2018/10/19/version-0.111-release.html">Arez 0.111 released</a></h1><p class="post-meta">October 19, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/arez" target="_blank">Arez Project</a></p></div></header><article class="post-content"><div><span><p><a href="https://github.com/arez/arez/compare/v0.110...v0.111">Full Changelog</a></p>
<p>Changes in this release:</p>
<ul>
<li><strong>[processor]</strong> Remove the synthetic setter created for <code>@Observable</code> methods introduced in <code>0.110</code>
as it is easier for the optimizing compilers to optimize the scenario where it is not present.</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/blog/2018/10/19/version-0.110-release.html">Arez 0.110 released</a></h1><p class="post-meta">October 19, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/arez" target="_blank">Arez Project</a></p></div></header><article class="post-content"><div><span><p><a href="https://github.com/arez/arez/compare/v0.109...v0.110">Full Changelog</a></p>
<p>Changes in this release:</p>
<ul>
<li><strong>[core]</strong> Add the parameter <code>writeOutsideTransaction</code> to the <code>@Observable</code> annotation that makes it
possible to define observable properties that will create an action if they are not already wrapped in
a transaction. This simplifies scenario where actions are only being created to modify a single
observable value.</li>
<li><strong>[docs]</strong> Add some minimal user documentation about <code>@Reference</code> and <code>@Inverse</code> annotations.</li>
<li><strong>[core]</strong> Add <code>&lt;inherits name='arez.Arez'/&gt;</code> to the <code>Component.gwt.xml</code> GWT module so no need
to explicitly inherit module in downstream applications.</li>
<li><strong>[processor]</strong> Generate a compile error if an <code>@Observable</code> annotated method is abstract and throws
an exception.</li>
<li><strong>[processor]</strong> Add the <code>depType</code> parameter to the <code>@Memoize</code> annotation.</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/blog/2018/10/08/version-0.109-release.html">Arez 0.109 released</a></h1><p class="post-meta">October 8, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/arez" target="_blank">Arez Project</a></p></div></header><article class="post-content"><div><span><p><a href="https://github.com/arez/arez/compare/v0.108...v0.109">Full Changelog</a></p>
<p>Changes in this release:</p>
<ul>
<li><strong>[core]</strong> Document the requirement for transactions on the methods: <code>ObservableValue.reportObserved()</code>,
<code>ObservableValue.preReportChanged()</code>, <code>ObservableValue.reportChanged()</code>, <code>ComputedValue.get()</code> and
<code>ComputedValue.reportPossiblyChanged()</code>.</li>
<li><strong>[core]</strong> Ensure that when the <code>ReactionEnvironment</code> functional interface is used to wrap actions that
the action can not be nested. If <code>ArezContext.runInEnvironment(action)</code> is invoked when an instance of the
<code>ReactionEnvironment</code> functional interface is already on the call stack then the supplied procedure is directly
invoked without invoking the <code>ReactionEnvironment</code> functional interface again.</li>
<li><strong>[core]</strong> Modify the <code>ReactionEnvironment</code> interface so that it executes <code>Function</code> and <code>SafeFunction</code>
instances rather than instances of <code>Procedure</code>. This will stop <code>ReactionEnvironment</code> from being a functional
interface but is preparation to enable actions to be optionally invoked inside an environment.</li>
<li><strong>[core]</strong> Add a compile-time setting <code>arez.enable_environments</code> that will mean allows the removal of the
<code>ReactionEnvironment</code> interface and related code if the feature is not needed.</li>
<li><strong>[core]</strong> Rename the <code>ReactionEnvironment</code> interface to <code>Environment</code></li>
<li><strong>[core]</strong> Add the flags <code>Flags.ENVIRONMENT_REQUIRED</code> and <code>Flags.ENVIRONMENT_REQUIRED</code>. These flags can be
supplied
<ul>
<li>when invoking actions via <code>ArezContext.action(...)</code> or <code>ArezContext.safeAction(...)</code></li>
<li>when creating <code>ComputedValue</code> instances.</li>
<li>when creating <code>Observer</code> instances that also created with the <code>Flags.APPLICATION_EXECUTOR</code> flag.
If the <code>Flags.ENVIRONMENT_REQUIRED</code> is specified then the runtime will ensure that the relevant code is
invoked within the context of the <code>Environment</code>.</li>
</ul></li>
<li><strong>[core]</strong> Rename the <code>@Observed</code> annotation to <code>@Observe</code>.</li>
<li><strong>[core]</strong> Verify the flags passed to the <code>ArezContext.action(...)</code> and <code>ArezContext.safeAction(...)</code>
have no incompatible flag combinations.</li>
<li><strong>[core]</strong> Add the <code>requireEnvironment</code> parameter to the <code>@Action</code> annotation to control whether the
<code>Flags.ENVIRONMENT_REQUIRED</code> flag is added when invoking the action.</li>
<li><strong>[core]</strong> Add the <code>requireEnvironment</code> parameter to the <code>@Computed</code> annotation to control whether the
<code>Flags.ENVIRONMENT_REQUIRED</code> flag is added when computing the value.</li>
<li><strong>[core]</strong> Add the <code>requireEnvironment</code> parameter to the <code>@Observe</code> annotation to control whether the
<code>Flags.ENVIRONMENT_REQUIRED</code> flag is added when observing a method that has an <code>APPLICATION</code> executor.</li>
<li><strong>[core]</strong> Add the <code>requireEnvironment</code> parameter to the <code>@Memoize</code> annotation to control whether the
<code>Flags.ENVIRONMENT_REQUIRED</code> flag is added when computing the value.</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/blog/2018/09/27/version-0.108-release.html">Arez 0.108 released</a></h1><p class="post-meta">September 27, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/arez" target="_blank">Arez Project</a></p></div></header><article class="post-content"><div><span><p><a href="https://github.com/arez/arez/compare/v0.107...v0.108">Full Changelog</a></p>
<p>Changes in this release:</p>
<ul>
<li><strong>[core]</strong> Improve the javadocs descriptions for <code>arez.Disposable</code> to bring them inline with latest
application architecture.</li>
<li><strong>[core]</strong> Ensure that the <code>apiInvariant(...)</code> invocation in <code>arez.Disposable</code> is guarded by an
<code>Arez.shouldCheckApiInvariants()</code> check. This improves dead code removal in the GWT2.x compiler.</li>
<li><strong>[core]</strong> Enhance the <code>@ComponentDependency</code> so that it can be applied to final fields.</li>
<li><strong>[processor]</strong> Generate a compile error if the <code>@CascadeDispose</code> and any other arez annotation
appears on the same method.</li>
<li><strong>[core]</strong> Cleanup documentation for the <code>@OnDepsChanged</code> method to remove references to the
<code>@Track</code> annotation that has been removed.</li>
<li><strong>[core]</strong> Enhance the <code>@CascadeDispose</code> annotation so that it can be applied to final methods.</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1><a href="/blog/2018/09/21/version-0.107-release.html">Arez 0.107 released</a></h1><p class="post-meta">September 21, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/arez" target="_blank">Arez Project</a></p></div></header><article class="post-content"><div><span><p><a href="https://github.com/arez/arez/compare/v0.106...v0.107">Full Changelog</a></p>
<p>Changes in this release:</p>
<ul>
<li><strong>[processor]</strong> The invariant check generated to link references was being generated outside of the
associated guard. This could result in dead-code not being eliminated in GWT2.x and triggered warnings
in source code analysis programs such as spotbugs.</li>
<li><strong>[gwt-output-qa]</strong> Add assertion to verify that the <code>arez.*Info</code> interfaces are not present if
<code>Arez.areSpiesEnabled()</code> returns false.</li>
<li><strong>[core]</strong> Remove the <code>onDispose</code> parameter from the <code>ArezContext.autorun(...)</code> methods and the
<code>ArezContext.computed(...)</code> methods. This hook method was never used from within the component model
and infrequently used (if ever) from the raw API. Removing it reduced code complexity and size.</li>
<li><strong>[core]</strong> Add invariant to ensure that the parameter <code>runImmediately</code> parameter can only be <code>true</code>
if <code>keepAlive</code> parameter is <code>true</code> when creating computed values via the <code>ArezContext.computed(...)</code>
methods.</li>
<li><strong>[core]</strong> Changed the default value for the <code>runImmediately</code> parameter passed to the
<code>ArezContext.autorun(...)</code> to be <code>true</code>. Previously the default value was <code>false</code> if the <code>autorun(...)</code>
method variant had a <code>component</code> parameter but otherwise the default value was <code>true</code>.</li>
<li><strong>[core]</strong> Refactor the internal representation of runtime and configuration flags within <code>arez.Observer</code>
instances. Previously the internal state was represented by several internal variables. This resulted in
significant memory pressure when an application consisted of many observers. These configuration values
have been collapsed into a single bit field. The fields that were collapsed include the configuration
values: <code>_mode</code>, <code>_priority</code>, <code>_observeLowerPriorityDependencies</code>, <code>_canNestActions</code> and
<code>_arezOnlyDependencies</code>. The runtime fields collapsed into the bit field include: <code>_state</code>, <code>_scheduled</code> and
<code>_executeTrackedNext</code>. The <code>ComputedValue._keepAlive</code> field has also been merged into the bit field.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.getObservers(ObservableValue)</code> that was replaced by <code>ObservableValueInfo.getObservers()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.asComputedValue(ObservableValue)</code> that was replaced by <code>ObservableValueInfo.asComputedValue()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.asComputedValue(ObservableValue)</code> that was replaced by <code>ObservableValueInfo.asComputedValue()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.getComponent(ObservableValue)</code> that was replaced by <code>ObservableValueInfo.getComponent()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.getValue(ObservableValue)</code> that was replaced by <code>ObservableValueInfo.getValue()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.hasAccessor(ObservableValue)</code> that was replaced by <code>ObservableValueInfo.hasAccessor()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.hasMutator(ObservableValue)</code> that was replaced by <code>ObservableValueInfo.hasMutator()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.setValue(ObservableValue,Object)</code> that was replaced by <code>ObservableValueInfo.setValue(Object)</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.isReadOnly(Observer)</code> that was replaced by <code>ObserverInfo.isReadOnly()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.isScheduled(Observer)</code> that was replaced by <code>ObserverInfo.isScheduled()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.isRunning(Observer)</code> that was replaced by <code>ObserverInfo.isRunning()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.getDependencies(Observer)</code> that was replaced by <code>ObserverInfo.getDependencies()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.asComputedValue(Observer)</code> that was replaced by <code>ObserverInfo.asComputedValue()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.isComputedValue(Observer)</code> that was replaced by <code>ObserverInfo.isComputedValue()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.getComponent(Observer)</code> that was replaced by <code>ObserverInfo.getComponent()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.isComputing(ComputedValue)</code> that was replaced by <code>ComputedValueInfo.isComputing()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.getDependencies(ComputedValue)</code> that was replaced by <code>ComputedValueInfo.getDependencies()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.getComponent(ComputedValue)</code> that was replaced by <code>ComputedValueInfo.getComponent()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.isActive(ComputedValue)</code> that was replaced by <code>ComputedValueInfo.isActive()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.getObservers(ComputedValue)</code> that was replaced by <code>ComputedValueInfo.getObservers()</code>.</li>
<li><strong>[core]</strong> Remove the method <code>Spy.getValue(ComputedValue)</code> that was replaced by <code>ComputedValueInfo.getValue()</code>.</li>
<li><strong>[core]</strong> Rename the <code>ArezContext.autorun(...)</code> methods to <code>ArezContext.observer(...)</code> and change the way
configuration is passed into to be flags so that it matches the underlying representation of configuration.</li>
<li><strong>[core]</strong> Refactor the <code>ArezContext.tracker(...)</code> methods to change the way configuration is passed into to
be flags so that it matches the underlying representation of configuration.</li>
<li><strong>[core]</strong> Refactor the internal representation of configuration flags within <code>arez.component.MemoizeCache</code> to
use a bit mask so it is easy to pass flags when creating the underlying <code>ComputedValue</code> instances.</li>
<li><strong>[core]</strong> Refactor the <code>ArezContext.computed(...)</code> methods to change the way configuration is passed into to
be flags so that it matches the underlying representation of configuration.</li>
<li><strong>[core]</strong> Move <code>arez.Spy</code> to <code>arez.spy.Spy</code> and <code>arez.SpyEventHandler</code> to <code>arez.spy.SpyEventHandler</code> so that
the Arez Spy API is located in a single package.</li>
<li><strong>[core]</strong> Remove the <code>TYPE</code> field from the spy events that is a constant derived at runtime and instead inline
the constant where it is used.</li>
<li><strong>[core]</strong> Add <code>setterAlwaysMutates</code> parameter to <code>@Observable</code> that defaults to true. If set to false then the
generated code for the setter will check that the setter actually made a change to the observable value before
propagating the change. This makes it possible for a setter to reject a change or transform/normalize a value
before assigning the value and this may not result in an actual change.</li>
<li>💥 <strong>[core]</strong> Replace usage of the <code>arez.Priority</code> enum with <code>arez.annotations.Priority</code> and <code>arez.spy.Priority</code>
and remove the <code>arez.Priority</code> class. The purpose is to migrate to where it is used and make it easy to identify
which code should be stripped during production compiles and under what circumstances. i.e. <code>arez.annotations.Priority</code>
should never be compiled to javascript and <code>arez.spy.Priority</code> should only be present if spies are enabled.</li>
<li>💥 <strong>[core]</strong> Rename the <code>canNestActions</code> parameter on the <code>@Autorun</code> and <code>@Track</code> annotation to
<code>nestedActionsAllowed</code> to align with underlying flags naming convention.</li>
<li>💥 <strong>[core]</strong> Rename the <code>@Autorun</code> annotation to <code>@Observed</code> to reflect naming conventions in the lower level
api and to prepare for merging with <code>@Tracked</code> annotation.</li>
<li>Update the <code>org.realityforge.guiceyloops:guiceyloops:jar</code> dependency to version <code>0.96</code>.</li>
<li>💥 <strong>[core]</strong> Rename the <code>onDepsUpdated</code> parameter to <code>onDepsChanged</code> to reflect conventions in the rest
of the codebase.</li>
<li>💥 <strong>[core]</strong> Rename <code>arez.annotations.ObservableRef</code> to <code>arez.annotations.ObservableValueRef</code>. The default
naming convention was also changed from <code>get[Name]Observable</code> to <code>get[Name]ObservableValue</code>.</li>
<li><strong>[core]</strong> Rename the <code>tracked</code> parameter on <code>ArezContext.observer(...)</code> methods to <code>observed</code> to align
with documentation.</li>
<li><strong>[core]</strong> Merge the <code>@Tracked</code> annotation into the <code>@Observed</code> annotation. This involved adding an additional
parameter <code>executor</code> that controls which actor is responsible for invoking the <code>@Observed</code> method. By default the
<code>executor</code> is set to <code>AREZ</code> which makes the invocation of the observed method the responsibility of the Arez
runtime. It can also be set to <code>APPLICATION</code> which means it is the responsibility of the application to invoke
the <code>@Observed</code> method. Previously you annotated a method with the <code>@Track</code> annotation which is equivalent to
annotating a method with <code>@Observed(executor=APPLICATION)</code>. The annotation processor was then updated to apply
different constraints on the method depending upon the value of the <code>executor</code> parameter. Support was also added
for the <code>reportParameters</code> parameter previously present on <code>@Track</code> annotation.</li>
<li><strong>[core]</strong> Rename the <code>ArezContext.track(...)</code> methods to <code>ArezContext.observe(...)</code>. This more accurately
reflects the intent of the operation.</li>
<li><strong>[core]</strong> If an application invoked <code>Observer.schedule()</code> on a non-STALE <code>Observer</code> with an <code>observed</code> method
and an <code>onDepsChanged</code> hook present then the next time that the <code>Observer</code> reacted to changes it would invoke the
<code>observed</code> method rather than the <code>onDepsChanged</code> as expected. This bug has been fixed.</li>
<li><strong>[core]</strong> Add support for the <code>arezOnlyDependencies</code> parameter to the <code>@Observed</code> that makes it possible to
specify the flags <code>AREZ_DEPENDENCIES_ONLY</code> and <code>NON_AREZ_DEPENDENCIES</code> when using the component model.</li>
<li><strong>[core]</strong> Introduce the <code>@ComponentIdRef</code> annotation that makes it possible to access the id of the component
without resorting to the <code>arez.component.Identifiable</code> interface which has some performance impact.</li>
<li><strong>[core]</strong> Fixed a bug where a component annotated with <code>@ArezComponent(nameIncludesId=false)</code> that also had a
<code>@Repository</code> annotation would always have an id of <code>0</code> in production mode.</li>
<li><strong>[core]</strong> The <code>Observer.schedule()</code>, <code>Observer.reportStale()</code> and <code>ComputedValue.reportPossibleChanged()</code>
did not register as usages of the transaction and thus actions that did not set <code>verifyActionRequired</code>
parameter to <code>false</code> would generate an invariant failure if the action only invoked these methods without also
accessing or mutating other observable state. These methods now mark the transaction as used so it is no longer
necessary to set <code>verifyActionRequired</code> to <code>false</code>.</li>
<li><strong>[core]</strong> Fixed bug where an action with <code>Flags.READ_ONLY</code> without the <code>Flags.REQUIRE_NEW_TRANSACTION</code> nested
in an action with the <code>Flags.READ_ONLY</code> flag would still create a new transaction. This has been fixed so that the
nested action no longer creates a new transaction.</li>
<li><strong>[core]</strong> Added new helper method <code>ArezContext.isReadOnlyTransactionActive()</code>.</li>
<li><strong>[core]</strong> Rename method <code>ArezContext.isWriteTransactionActive()</code> to <code>ArezContext.isReadWriteTransactionActive()</code>.</li>
<li><strong>[core]</strong> Changed the core api for invoking actions. Previously actions were created by passing a number
of boolean flags such as <code>mutation</code>, <code>verifyActionRequired</code> and <code>requireNewTransaction</code>. These have been collapsed
into a flags parameter that was moved after the executable parameter. The <code>parameters</code> parameter was changed from
a non-null, var-args parameter into a nullable array. Update the annotation processor to pass null if there are no
parameters or <code>Arez.areSpiesEnabled()</code> returns <code>false</code>. This improves the ability of the GWT compiler to optimize
and eliminate unused code.</li>
<li><strong>[core]</strong> Update the <code>ArezContext.observe(...)</code> and <code>ArezContext.safeObserve(...)</code> methods to change the last
parameter from a non-null, var args parameter into a nullable array. Makes the code easier for the GWT compiler
to optimize.</li>
<li><strong>[core]</strong> Remove the <code>ArezContext.noTxAction(...)</code> and <code>ArezContext.safeNoTxAction(...)</code> methods and associated
infrastructure for suspending and resuming transactions. The API was error prone and no use-case existed for the
functionality so it has been removed until such a time where a use-case is determined. Removal also resulted in a
decrease in code size when compiled using GWT.</li>
<li><strong>[core]</strong> Add a flag <code>Flags.AREZ_OR_NO_DEPENDENCIES</code> that makes it possible for observers that have not
specified the <code>Flags.SCHEDULED_EXTERNALLY</code> flag to have zero dependencies. An <code>Observer</code> or <code>ComputedValue</code>
that has zero dependencies will never be scheduled again but sometimes this is an expected scenario,
particularly as various elements of a reactive system are disposed.</li>
<li><strong>[core]</strong> Replace the <code>arezOnlyDependencies</code> on the <code>@Computed</code> and <code>@Observed</code> annotations with an
enumeration <code>DepType</code> that supports three values: <code>AREZ</code> (which has equivalent behaviour as the previous
<code>arezOnlyDependencies=true</code> parameter), <code>AREZ_OR_EXTERNAL</code> (which is equivalent behaviour as the previous
<code>arezOnlyDependencies=false</code> parameter) and <code>AREZ_OR_NONE</code> which expects that the observer or computed value
to be derived from arez dependencies <em>but</em> also allows the observer or computed value to have zero dependencies.</li>
<li><strong>[core]</strong> Start to enforce the constraint that application executed observed methods must complete having
accessed at least one dependency if the dependency type is <code>AREZ</code>. i.e. If a method annotated with
<code>@Observed( executor = Executor.APPLICATION, depType = DepType.AREZ )</code> does not access an observable an
invariant failure will be generated.</li>
<li><strong>[core]</strong> Rename the <code>@Dependency</code> annotation to <code>@ComponentDependency</code> to more accurately reflect intent.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev" href="/blog/page5/">← Prev</a><a class="docs-next" href="/blog/page7/">Next →</a></div></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.svg" alt="Arez" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/overview.html">Overview</a><a href="/docs/concepts.html">Concepts</a><a href="/api/index.html">API Reference</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" href="https://github.com/arez/arez" data-icon="octicon-star" data-count-href="/arez/arez/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2020 the Arez Project.</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                apiKey: 'b8c49751e0914443436822868f0c5000',
                indexName: 'arez',
                inputSelector: '#search_input_react'
              });
            </script></body></html>